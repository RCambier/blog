<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Hypothesis testing | R Cambier</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Hypothesis testing" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hypothesis testing, confidence interval" />
<meta property="og:description" content="Hypothesis testing, confidence interval" />
<link rel="canonical" href="https://rcambier.github.io/blog/ai/2021/09/13/hypothesis-testing.html" />
<meta property="og:url" content="https://rcambier.github.io/blog/ai/2021/09/13/hypothesis-testing.html" />
<meta property="og:site_name" content="R Cambier" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-13T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://rcambier.github.io/blog/ai/2021/09/13/hypothesis-testing.html","@type":"BlogPosting","headline":"Hypothesis testing","dateModified":"2021-09-13T00:00:00-05:00","datePublished":"2021-09-13T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rcambier.github.io/blog/ai/2021/09/13/hypothesis-testing.html"},"description":"Hypothesis testing, confidence interval","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-37Z9P8CY5J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-37Z9P8CY5J');
</script>


<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">R Cambier</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/ai-from-scratch/">Artificial Intelligence</a><a class="page-link" href="/blog/programming/">Programming</a><a class="page-link" href="/blog/riddles/">Riddles</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Hypothesis testing</h1><p class="page-description">Hypothesis testing, confidence interval</p>

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/RCambier/blog/tree/master/_notebooks/2021-09-13-hypothesis-testing.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/blog/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/RCambier/blog/master?filepath=_notebooks%2F2021-09-13-hypothesis-testing.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blog/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/RCambier/blog/blob/master/_notebooks/2021-09-13-hypothesis-testing.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blog/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-09-13-hypothesis-testing.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hypothesis-testing">Hypothesis testing<a class="anchor-link" href="#Hypothesis-testing"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span> 
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-typical-statement">A typical statement<a class="anchor-link" href="#A-typical-statement"> </a></h3><p>A particular brand of tires claims that its deluxe tire averages at least 50,000 miles before it needs to be replaced. From past studies of this tire, the standard deviation is known to be 8,000. A survey of owners of that tire design is conducted. From the 28 tires surveyed, the mean lifespan was 46,500 miles with a standard deviation of 9,800 miles. Using  ùõº=0.05 , is the data highly inconsistent with the claim?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">claim_pop_mean</span> <span class="o">=</span> <span class="mi">50_000</span>
<span class="n">pop_std</span> <span class="o">=</span> <span class="mi">8000</span>

<span class="c1"># What we know of the sample</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">sample_mean</span> <span class="o">=</span> <span class="mi">46_500</span>
<span class="n">sample_std</span> <span class="o">=</span> <span class="mi">9800</span>

<span class="c1"># The chances of Type 1 error we are ready to accept</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.05</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The question can be formulated as:</p>
<ul>
<li>"Compared to the mean of that population (50_000), how crazy is the sample mean (46_500) ? With an alpha of 0.05"</li>
</ul>
<p>which becomes</p>
<ul>
<li>"Using the sample deviation of the mean of that population, how far is the sample mean ? With an alpha of 0.05"</li>
</ul>
<p>which becomes</p>
<ul>
<li>"Is the sample mean further away than 1.64 times the standard error of that population ?"</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># H0 =&gt; pop_mean &gt;= 50_000</span>
<span class="c1"># H1 =&gt; pop_mean &lt; 50_000</span>

<span class="n">population_standard_error</span> <span class="o">=</span> <span class="mi">8000</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span> <span class="c1"># &quot;If you grab a random sample mean, how is it going to variate&quot;</span>
<span class="n">how_far_we_are_from_pop_mean</span> <span class="o">=</span> <span class="p">(</span><span class="mi">46_500</span> <span class="o">-</span> <span class="mi">50_000</span><span class="p">)</span> <span class="o">/</span> <span class="n">population_standard_error</span> <span class="c1"># How far is this specific sample mean from the population mean. </span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are different ways to reject the null hypothesis.</p>
<p>We can look at wether we are smaller or not than 0.05.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">how_far_we_are_in_z</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">how_far_we_are_from_pop_mean</span><span class="p">)</span> 
<span class="n">how_far_we_are_in_z</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0.010305579572800304</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this case we are at 0.01, which means that in the distribution of sample means, we are so extreme that there is no way that the sample mean we observed actually came from the sample mean distribution that we built looking at the population.</p>
<p>Another way is to look at how far we go on the axis, not in term of percentage (like 0,05 being 5%) but in term of distance from the population mean. This would look like the following</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">how_far_we_are_from_pop_mean</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>-2.315032397181517</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To know if this is a value too extreme or not, we can compare it to how far 0.05 is on the same axis:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">-</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="mf">0.95</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>-1.6448536269514722</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="When-you-don't-have-the-population-standard-deviation">When you don't have the population standard deviation<a class="anchor-link" href="#When-you-don't-have-the-population-standard-deviation"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Realistically however, you often don't have the population standard deviation. 
In this case, you need to estimate it from the sample.</p>
<p>Doing that is less accurate. In order to compensate a bit, we need to model the "spread of sample means" a bit differently.</p>
<p>Since normally we allow the sample mean to only go "so far" from the population mean. We will force it to be "even a bit further". The way we do this is by using a "heavy tail" distribution for the sample mean. That way, the 0.05 mark will be further to the right or to the left, and we are forced to be a little bit more sure of ourselves before saying anything.</p>
<p>Let's use the sample problem as above, but pretend that we don't know that the population has a standard deviation of 8000. We are forced to use the 9800 that we discovered experimentally.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">claim_pop_mean</span> <span class="o">=</span> <span class="mi">50_000</span>
<span class="c1"># --- pop_std = 8000 # we don&#39;t know this anymore ---</span>

<span class="c1"># What we know of the sample</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">sample_mean</span> <span class="o">=</span> <span class="mi">46_500</span>
<span class="n">sample_std</span> <span class="o">=</span> <span class="mi">9800</span>

<span class="c1"># The chances of Type 1 error we are ready to accept</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.05</span>

<span class="c1"># 1. How far is the sample_mean from the pop_mean ?</span>
<span class="c1"># H0 =&gt; pop_mean &gt;= 50_000</span>
<span class="c1"># H1 =&gt; pop_mean &lt; 50_000</span>

<span class="n">population_standard_error</span> <span class="o">=</span> <span class="mi">9800</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span> <span class="c1"># &quot;If you grab a random sample mean, how is it going to variate&quot;</span>
<span class="n">how_far_we_are_from_pop_mean</span> <span class="o">=</span> <span class="p">(</span><span class="mi">46_500</span> <span class="o">-</span> <span class="mi">50_000</span><span class="p">)</span> <span class="o">/</span> <span class="n">population_standard_error</span> <span class="c1"># How far is this specific sample mean from the population mean. </span>

<span class="n">how_far_we_are_in_z</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">how_far_we_are_from_pop_mean</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="n">how_far_we_are_in_z</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0.014225814767264972</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We still reject the null hypothesis. But notice how much less confident we are ! Even if the standard deviation we sample was exactly 8000 (like the population one), we would still be less confident than if we received the standard deviation through a trustful source.</p>
<p>This is the whole point of this T student distribution !</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Confidence-interval">Confidence interval<a class="anchor-link" href="#Confidence-interval"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Confidence interval are only in the point of view of the sample we just took.</p>
<p>From that sample, let's just add a standard error on each side and see how far this goes.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">how_much_we_allow_on_unit_normal_distrib</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="mf">0.95</span><span class="p">)</span>
<span class="n">sample_mean_standard_error</span> <span class="o">=</span> <span class="mi">9800</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">how_much_we_allow_in_problem_domain</span> <span class="o">=</span> <span class="n">how_much_we_allow_on_unit_normal_distrib</span> <span class="o">*</span> <span class="n">sample_mean_standard_error</span>
<span class="n">how_much_we_allow_in_problem_domain</span>
<span class="p">[</span><span class="mi">46_500</span> <span class="o">-</span> <span class="n">how_much_we_allow_in_problem_domain</span><span class="p">,</span> <span class="mi">46_500</span> <span class="o">+</span> <span class="n">how_much_we_allow_in_problem_domain</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>3046.311548011343</pre>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="RCambier/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/ai/2021/09/13/hypothesis-testing.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://rcambier.github.io/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>R Cambier&#39;s blog. About riddles and computer science.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
